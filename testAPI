from xmldiff import main, formatting
import datetime
import os

# === Paramètres ===
file1 = "C:/chemin/vers/fichier1.xml"
file2 = "C:/chemin/vers/fichier2.xml"
html_output = "rapport_diff.html"

# === Formatage verbeux (texte brut) ===
formatter = formatting.DiffFormatter(normalize=formatting.WS_BOTH)

# === Comparaison avec options ===
diff = main.diff_files(
    file1,
    file2,
    formatter=formatter,
    fast_match=False,
    uniqueattrs=["id"],
    ratio_mode=True
)

# === Affichage en console ===
if diff:
    print("❗ Différences détectées :\n")
    for line in diff:
        print("•", line)
else:
    print("✅ Aucun changement détecté.")
