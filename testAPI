.
â”œâ”€â”€ docker/
â”‚   â””â”€â”€ dev.Dockerfile        # Image de dÃ©veloppement Python
â”œâ”€â”€ docker-compose.yml        # Orchestration des services
â”œâ”€â”€ Makefile                  # Aide pour les commandes de dÃ©veloppement
â”œâ”€â”€ python_project/
â”‚   â”œâ”€â”€ src/                  # Code source Python (modules, fonctions, classes)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ module1.py
â”‚   â”œâ”€â”€ main.py               # Point dâ€™entrÃ©e pour exÃ©cuter localement
â”‚   â”œâ”€â”€ tests/                # Tests unitaires automatisÃ©s
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ test_module1.py
â”‚   â”œâ”€â”€ requirements.txt      # Liste des dÃ©pendances Python
â”‚   â”œâ”€â”€ .env.example          # Variables dâ€™environnement (sans secrets)
â”‚   â”œâ”€â”€ .pre-commit-config.yaml  # Configuration des hooks git
â”‚   â””â”€â”€ README.md             # Documentation du projet





# docker/dev.Dockerfile
FROM python:3.11-slim

# CrÃ©e un utilisateur non-root
RUN useradd -ms /bin/bash devuser

# RÃ©pertoire de travail
WORKDIR /app

# Copie les fichiers (le code sera aussi montÃ© via volume dans docker-compose)
COPY python_project/ /app

# Installation des dÃ©pendances Python
RUN pip install --no-cache-dir -r requirements.txt

# Passe en tant qu'utilisateur non-root
USER devuser

# Maintient le conteneur actif (mode dev)
CMD ["tail", "-f", "/dev/null"]




version: '3.8'

services:
  mariadb:
    image: mariadb
    ...

  phpmyadmin:
    image: phpmyadmin/phpmyadmin
    ...

  limesurvey:
    image: limesurvey/limesurvey
    ...

  python-dev:
    build:
      context: .
      dockerfile: docker/dev.Dockerfile
    volumes:
      - ./python_project:/app
    environment:
      - PYTHONUNBUFFERED=1
    networks:
      - default
    depends_on:
      - mariadb






ğŸ Base image : python:3.11-slim
Image lÃ©gÃ¨re, maintenue officiellement par Python

Moins de failles potentielles que les images "full"

Compatible avec tous les outils modernes (pip, venv, pytest, etc.)

Maintien facile de la version Python entre dev/test/stage



ğŸ” Utilisateur non-root dans le conteneur
CrÃ©ation dâ€™un utilisateur devuser

EmpÃªche lâ€™accÃ¨s root Ã  lâ€™intÃ©rieur du conteneur

SÃ©curitÃ© renforcÃ©e : bonne pratique DevSecOps

Ã‰vite les permissions sur les fichiers partagÃ©s avec lâ€™hÃ´te (notamment sur Windows)

Dockerfile
Copier
Modifier



Volumes montÃ©s pour un dÃ©veloppement en live
Montage de ./python_project:/app dans le conteneur

Code modifiable en temps rÃ©el depuis lâ€™IDE local

Aucun besoin de reconstruire lâ€™image Ã  chaque modification

Compatible avec VS Code / PyCharm + extensions Docker



 AccÃ¨s direct Ã  MariaDB via le rÃ©seau Docker
Tous les services Docker sont sur le mÃªme rÃ©seau interne

AccÃ¨s Ã  la base avec host=mariadb (pas besoin dâ€™IP)

Pas dâ€™exposition du port MariaDB Ã  lâ€™extÃ©rieur si non nÃ©cessaire

Favorise le test de bout en bout des scripts Python




 Tests, Linting, Pre-commit intÃ©grÃ©s dans lâ€™image
pytest pour les tests unitaires automatisÃ©s

black et ruff pour le formatage et la vÃ©rification du style

.pre-commit-config.yaml pour des hooks git (formatage auto avant chaque commit)


